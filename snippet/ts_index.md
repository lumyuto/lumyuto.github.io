## tushare 指数

[指数文档](https://tushare.pro/document/2?doc_id=94)

``` Python
api.index_basic(market='SSE')
```

| 名称      | 类型 | 必选 | 描述        |
|-----------|-----|-----|-------------|
| market    | str | Y   | 交易所或服务商 |
| publisher | str | N   | 发布商       |
| category  | str | N   | 指数类别     |

| 市场代码 | 说明     | 备注 | 数量 | category |
|--------|----------|-----|-----|-----|
| MSCI   | MSCI指数 | 国际指数 | 3236 | `['规模指数', '成长指数', '价值指数', '一级行业指数', '二级行业指数', '三级行业指数', '其他', '策略指数']` |
| CSI    | 中证指数  | 跨市场指数 | 3365 | `['主题指数', '策略指数', '债券指数', '规模指数', '一级行业指数', '价值指数', '成长指数', '二级行业指数', '四级行业指数', '其他', '行业指数', '基金指数', '三级行业指数', '商品指数', '综合指数', '其他指数','风格指数']` |
| SSE    | 上交所指数 | 全是债券指数 | 81 |
| SZSE   | 深交所指数 | 有很多主题指数 | 329 |
| CICC   | 中金所指数 | 主要是行业和概念指数 | 数据不太全
| SW     | 申万指数  | 全是行业指数 | 507 | `一级行业指数 34 二级行业指数 113 三级行业指数 252` 
| OTH    | 其他指数  | | | `商品交易所 债券指数 国外指数` 

真正有意义的主要是中证指数

CSI 主题指数 概念股

## 中证指数

| 名字| 数量 |
|------------|------|
| 其他指数    | 2    |
| 四级行业指数 | 6    |
| 价值指数    | 7    |
| 风格指数    | 8    |
| 综合指数    | 8    |
| 成长指数    | 8    |
| 其他       | 18   |
| 基金指数    | 38   |
| 商品指数    | 44   |
| 规模指数    | 103  |
| 行业指数    | 158  |
| 三级行业指数 | 160  |
| 二级行业指数 | 170  |
| 策略指数    | 290  |
| 一级行业指数 | 303  |
| 债券指数    | 845  |
| 主题指数    | 1197 |

## [申万指数](http://www.swsindex.com/idx0510.aspx)

| code   | 数量 | 起始日期 | 收益 | 波动率 | name | rank
|--------|------|----------|------|------|------|----
801001 | 4867 | 2000/1/4 | 1.903842 | 0.016636 | 申万50 | 12.0
801002 | 3794 | 2004/7/7 | 1.896288 | 0.019449 | 申万中小板 | 18.0
801003 | 4871 | 2000/1/4 | 1.781385 | 0.016645 | 申万Ａ指 | 17.0
801005 | 2495 | 2009/11/9 | 3.368697 | 0.020389 | 申万创业板 | 3.0
801010 | 4872 | 2000/1/4 | 1.910502 | 0.019379 | 农林牧渔 | 15.0
801020 | 4872 | 2000/1/4 | 0.466488 | 0.020695 | 采掘 | 42.0
801030 | 4872 | 2000/1/4 | 1.424399 | 0.017597 | 化工 | 27.0
801040 | 4872 | 2000/1/4 | 0.863922 | 0.019240 | 钢铁 | 40.0
801050 | 4872 | 2000/1/4 | 0.877219 | 0.021706 | 有色金属 | 39.0
801080 | 4872 | 2000/1/4 | 3.358291 | 0.020441 | 电子元器件 | 4.0
801110 | 4872 | 2000/1/4 | 3.993141 | 0.018478 | 家用电器 | 2.0
801120 | 4872 | 2000/1/4 | 2.611990 | 0.016713 | 食品饮料 | 5.0
801130 | 4872 | 2000/1/4 | 1.002065 | 0.018551 | 纺织服装 | 37.0
801140 | 4872 | 2000/1/4 | 1.399838 | 0.018208 | 轻工制造 | 31.0
801150 | 4872 | 2000/1/4 | 2.425028 | 0.017353 | 医药生物 | 6.0
801160 | 4872 | 2000/1/4 | 1.152293 | 0.016661 | 公用事业 | 36.0
801170 | 4872 | 2000/1/4 | 1.249332 | 0.017259 | 交通运输 | 33.0
801180 | 4872 | 2000/1/4 | 1.826242 | 0.019964 | 房地产 | 20.0
801200 | 4872 | 2000/1/4 | 0.916008 | 0.017916 | 商业贸易 | 38.0
801210 | 4872 | 2000/1/4 | 2.247822 | 0.019328 | 餐饮旅游 | 10.0
801230 | 4872 | 2000/1/4 | 1.315551 | 0.019194 | 综合 | 32.0
801300 | 4872 | 2000/1/4 | 1.625296 | 0.016419 | 申万300指数 | 23.0
801811 | 4872 | 2000/1/4 | 1.722299 | 0.016318 | 大盘指数 | 19.0
801812 | 4872 | 2000/1/4 | 1.527735 | 0.017837 | 中盘指数 | 24.0
801813 | 4872 | 2000/1/4 | 1.442133 | 0.018061 | 小盘指数 | 26.0
801821 | 4872 | 2000/1/4 | 1.129801 | 0.018630 | 高市盈率指数 | 34.0
801822 | 4872 | 2000/1/4 | 1.482393 | 0.017780 | 中市盈率指数 | 25.0
801823 | 4872 | 2000/1/4 | 1.859116 | 0.016740 | 低市盈率指数 | 16.0
801831 | 4872 | 2000/1/4 | 1.524611 | 0.016729 | 高市净率指数 | 21.0
801832 | 4872 | 2000/1/4 | 1.346426 | 0.017973 | 中市净率指数 | 30.0
801833 | 4872 | 2000/1/4 | 1.712131 | 0.017082 | 低市净率指数 | 22.0
801841 | 4872 | 2000/1/4 | 1.864911 | 0.016586 | 高价股指数 | 11.0
801842 | 4872 | 2000/1/4 | 1.147225 | 0.017871 | 中价股指数 | 35.0
801843 | 4872 | 2000/1/4 | 1.866890 | 0.016686 | 低价股指数 | 14.0
801851 | 4872 | 2000/1/4 | 1.354432 | 0.017277 | 亏损股指数 | 29.0
801852 | 4872 | 2000/1/4 | 1.402938 | 0.019008 | 微利股指数 | 28.0
801853 | 4872 | 2000/1/4 | 2.316530 | 0.017014 | 绩优股指数 | 8.0
801861 | 1938 | 2000/1/4 | 0.554747 | 0.014467 | 配股指数 | 43.0
801862 | 4126 | 2000/1/4 | 0.084245 | 0.023608 | 活跃指数 | 44.0
801863 | 4729 | 2000/1/4 | 3.786236 | 0.019635 | 新股指数 | 1.0
801901 | 3406 | 2003/1/3 | 2.385586 | 0.017372 | 基金重仓 | 7.0
801903 | 3406 | 2003/1/3 | 1.840293 | 0.017306 | 基金核心 | 13.0
801905 | 3569 | 2002/5/9 | 2.173640 | 0.017021 | 申万重点 | 9.0
802613 | 532 | 2017/3/29 | 0.931497 | 0.014903 | 养老指数 | 41.0

``` 
指数代码                     801001
指数名称                       申万50
发布日期                   2020/2/24
开盘指数                    3191.92
最高指数                    3202.41
最低指数                    3167.35
收盘指数                    3191.39
成交量(亿股)                   63.81
成交额(亿元)                 1461.13
涨跌幅(%)                    -0.46
换手率(%)                   0.7203
市盈率(倍)                    14.26
市净率(倍)                     2.48
均价(元)                      72.9
成交额占比(%)                  12.23
流通市值(亿元)                 132506
平均流通市值(亿元)              2650.12
股息率(%)                     1.74
```

### 研究计划

1. 进入指数 和 从指数剔除
2. 行业 规模 地域 动量效应

### spearman 斯皮尔曼相关

``` python
from scipy import stats
corr, p_value = stats.spearmanr([1,2,3,4,5], [5,6,7,8,7])
```

## 代码

``` python
root = '/'
file_list = os.listdir(root)
for path in file_list:
    data = pd.read_html(open(root+path).read(), encoding='utf-8')[0]
    code = data['指数代码'][0]
    name = data['指数名称'][0]
    data.to_csv(root+str(code)+'.csv')
```

``` python
# 行业代码
industry_code = [801010, 801020, 801030, 801040, 801050, 801080, 801110, 801120, 801130, 801140, 801150, 801160, 801170, 801180, 801200, 801210, 801230]
```

``` python
code = '801003'
index = pd.read_csv(root+str(code)+'.csv')[::-1]

code = industry_code[8]
data = pd.read_csv(root+str(code)+'.csv')[::-1]
print(data['指数名称'][0])

yy = index.merge(data, on='发布日期')
data_r  = np.log(yy['涨跌幅(%)_y']/100+1)
index_r = np.log(yy['涨跌幅(%)_x']/100+1)

m = pd.DataFrame([data_r, index_r]).T.cov()
beta = m.iloc[1,0] / m.iloc[1,1]
print(beta)

(data_r - index_r * beta).cumsum().rolling(200).mean().plot()

(data_r).cumsum().plot()
(index_r * beta).cumsum().plot()
```

<!-- ![](/img/aa.png) -->

<canvas id="myChart" width="400" height="400"></canvas>
<script src="{{cdnPath}}/snippet/chart.js">

