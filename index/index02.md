## 指数-规模

| 代码   | 收益率    | 波动率    | 名称      | 夏普排名 |
|--------|----------|----------|-----------|--------|
| 801001 | 1.903842 | 0.016636 | 申万50    | 12.0   |
| 801002 | 1.896288 | 0.019449 | 申万中小板 | 18.0   |
| 801003 | 1.781385 | 0.016645 | 申万Ａ指    | 17.0   |
| 801005 | 3.368697 | 0.020389 | 申万创业板 | 3.0    |
| 801300 | 1.625296 | 0.016419 | 申万300指数 | 23.0   |

|        | 801001   | 801002   | 801003   | 801005   | 801300   |
|--------|----------|----------|----------|----------|----------|
| 801001 | 1.000000 | **0.647044** | 0.822816 | **0.526536** | 0.950277 |
| 801002 | 0.647044 | 1.000000 | 0.954474 | 0.954810 | 0.832281 |
| 801003 | 0.822816 | 0.954474 | 1.000000 | 0.874126 | 0.951286 |
| 801005 | 0.526536 | 0.954810 | 0.874126 | 1.000000 | **0.726070** |
| 801300 | 0.950277 | 0.832281 | 0.951286 | 0.726070 | 1.000000 |

发现一个规律：
处在因子两端部分的通常有更好的夏普率，50和创业板 高价和低价股 处在中间的最不受关注

同时能观察到 50和创业板 的相关性比较低 同时持有两者 可以获得超额收益

<canvas id="chart01"></canvas>
<canvas id="chart02"></canvas>
<canvas id="chart03"></canvas>

市净率对股市底部的判断确实是很有效的，也可以看出目前整体市净率处在较低的位置上

<canvas id="chart04"></canvas>

Beta的计算方法 有点迷惑，不同的时间周期 算出来的Beta可能是完全不同的

看这个图上的线 不知道是不是算错了

早前的50指数 相关性是负的，仔细检查了一下发现日相关性确实是这样，可能和人们的风险偏好的变化有关 也有可能是08年前的50数据有问题

<script>
loadData('/index/size/Price.csv')(drawTimeSeries({

        el: 'chart01',
        labels: ['801003', '801001', '801300', '801002', '801005'],
        label_text: ['801003 申万Ａ指', '801001 申万50', '801300 申万300指数', '801002 申万中小板', '801005 申万创业板'],
        title: '价格',
        x: data => data.map(_ => new Date(_['发布日期'])),

}))

loadData('/index/size/PE.csv')(drawTimeSeries({

        el: 'chart02',
        labels: ['801003', '801001', '801300', '801002', '801005'],
        label_text: ['801003 申万Ａ指', '801001 申万50', '801300 申万300指数', '801002 申万中小板', '801005 申万创业板'],
        title: '市盈率',
        x: data => data.map(_ => new Date(_['发布日期'])),

}))

loadData('/index/size/PB.csv')(drawTimeSeries({

        el: 'chart03',
        labels: ['801003', '801001', '801300', '801002', '801005'],
        label_text: ['801003 申万Ａ指', '801001 申万50', '801300 申万300指数', '801002 申万中小板', '801005 申万创业板'],
        title: '市净率',
        x: data => data.map(_ => new Date(_['发布日期'])),

}))

loadData('/index/size/beta.csv')(drawTimeSeries({

        el: 'chart04',
        labels: ['801003', '801001', '801300', '801002', '801005'],
        label_text: ['801003 申万Ａ指', '801001 申万50', '801300 申万300指数', '801002 申万中小板', '801005 申万创业板'],
        title: 'Beta',
        x: data => data.map(_ => new Date(_['发布日期'])),

}))
</script>

``` python
ret = {}
tt = pd.read_csv(root+str(801003)+'.csv')
for code in [801001, 801002, 801003, 801005, 801300]:
    data = pd.read_csv(root+str(code)+'.csv')
    rr = tt.merge(data, on='发布日期')
    ret[str(code)] = rr['涨跌幅(%)_y']
# ret['发布日期'] = tt['发布日期']
data = pd.DataFrame(ret)
data = np.log(data/100+1)
data.index = tt['发布日期']
```

``` python
m = data.loc[:,['801003','801300']][::-1].rolling(120).cov().unstack()
beta = (m.iloc[:,0] / m.iloc[:,1])
```

